(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{92732:function(e,t,s){Promise.resolve().then(s.bind(s,17339))},17339:function(e,t,s){"use strict";s.d(t,{default:function(){return h}});var a=s(57437),n=s(86517),r=s(53262),l=s(37440),i=s(2265);function c(){let{state:e,setFilters:t}=(0,n.t)(),[s,r]=(0,i.useState)({startDate:e.filters.startDate||"",endDate:e.filters.endDate||"",category:e.filters.category||"All",search:e.filters.search||""});return(0,i.useEffect)(()=>{r({startDate:e.filters.startDate||"",endDate:e.filters.endDate||"",category:e.filters.category||"All",search:e.filters.search||""})},[e.filters]),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Filters"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"btn btn-outline",onClick:()=>{let e={startDate:"",endDate:"",category:"All",search:""};r(e),t(e)},children:"Reset"}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:()=>t(s),children:"Apply"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Start Date"}),(0,a.jsx)("input",{type:"date",className:"input mt-1",value:s.startDate,onChange:e=>r(t=>({...t,startDate:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"End Date"}),(0,a.jsx)("input",{type:"date",className:"input mt-1",value:s.endDate,onChange:e=>r(t=>({...t,endDate:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Category"}),(0,a.jsxs)("select",{className:"select mt-1",value:s.category,onChange:e=>r(t=>({...t,category:e.target.value})),children:[(0,a.jsx)("option",{value:"All",children:"All"}),l.aA.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Search"}),(0,a.jsx)("input",{className:"input mt-1",placeholder:"Description contains...",value:s.search,onChange:e=>r(t=>({...t,search:e.target.value}))})]})]})]})}var d=s(15361);function o(){let{filtered:e}=(0,n.t)(),t=(0,i.useMemo)(()=>({total:(0,d.d5)(e),month:(0,d.f$)(e,new Date),top:(0,d.Ee)(e,3)}),[e]);return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Total Spent (filtered)"}),(0,a.jsx)("p",{className:"text-2xl font-bold mt-1",children:(0,l.Yu)(t.total)})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"This Month"}),(0,a.jsx)("p",{className:"text-2xl font-bold mt-1",children:(0,l.Yu)(t.month)})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:"Top Categories"}),(0,a.jsxs)("div",{className:"space-y-2",children:[0===t.top.length&&(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"No data"}),t.top.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"badge",children:t+1}),(0,a.jsx)("span",{className:"text-sm",children:e.category})]}),(0,a.jsx)("div",{className:"font-medium",children:(0,l.Yu)(e.amountCents)})]},e.category))]})]})]})}var u=s(57818);class m extends i.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("UI ErrorBoundary caught:",e,t)}render(){return this.state.hasError?(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"A client-side error occurred. Check the console for details."})]}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}let x=(0,u.default)(()=>Promise.all([s.e(248),s.e(341)]).then(s.bind(s,35341)),{loadableGenerated:{webpack:()=>[35341]},ssr:!1});function h(){let{state:e}=(0,n.t)();return e.loaded?(0,a.jsx)(m,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("section",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Track your spending with summaries, filters, and charts."})]}),(0,a.jsx)("a",{href:"#add",className:"btn btn-primary",children:"Add Expense"})]})}),(0,a.jsx)(o,{}),(0,a.jsx)(x,{}),(0,a.jsx)(c,{}),(0,a.jsxs)("section",{id:"add",className:"card",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Add Expense"}),(0,a.jsx)(r.Z,{})]}),(0,a.jsx)("section",{children:(0,a.jsx)(p,{})})]})}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-12 card animate-pulse"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsx)("div",{className:"h-28 card animate-pulse"}),(0,a.jsx)("div",{className:"h-28 card animate-pulse"}),(0,a.jsx)("div",{className:"h-28 card animate-pulse"})]}),(0,a.jsx)("div",{className:"h-80 card animate-pulse"}),(0,a.jsx)("div",{className:"h-80 card animate-pulse"})]})}function p(){let e=s(33147).Z;return(0,a.jsx)(e,{})}},53262:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(57437),n=s(2265),r=s(80537),l=s(37440),i=s(86517),c=s(17973);let d=r.Ry({date:r.Z_().min(1,"Date is required"),amount:r.Z_().min(1,"Amount is required").refine(e=>!Number.isNaN(parseFloat(e))&&parseFloat(e)>0,"Enter a valid positive number"),category:r.Km(["Food","Transportation","Entertainment","Shopping","Bills","Other"]),description:r.Z_().min(1,"Description is required")});function o(e){var t,s,r;let{initial:o,onDone:u}=e,{add:m,edit:x}=(0,i.t)(),{notify:h}=(0,c.p)(),[p,f]=(0,n.useState)({date:null!==(t=null==o?void 0:o.date)&&void 0!==t?t:new Date().toISOString().slice(0,10),amount:o?(o.amountCents/100).toFixed(2):"",category:null!==(s=null==o?void 0:o.category)&&void 0!==s?s:"Food",description:null!==(r=null==o?void 0:o.description)&&void 0!==r?r:""}),[j,g]=(0,n.useState)({}),[v,N]=(0,n.useState)(!1);return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=d.safeParse(p);if(!t.success){let e={};t.error.issues.forEach(t=>{var s;e[(null===(s=t.path[0])||void 0===s?void 0:s.toString())||"form"]=t.message}),g(e);return}g({}),N(!0);try{let e=t.data,s=(0,l.Ie)(e.amount);if(s<=0){g({amount:"Amount must be greater than zero"}),N(!1);return}o?(x(o.id,{date:e.date,amountCents:s,category:e.category,description:e.description}),h("Expense updated")):(m({date:e.date,amountCents:s,category:e.category,description:e.description}),h("Expense added")),f({date:new Date().toISOString().slice(0,10),amount:"",category:"Food",description:""}),null==u||u()}finally{N(!1)}},className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Date"}),(0,a.jsx)("input",{type:"date",className:"input mt-1",value:p.date,onChange:e=>f(t=>({...t,date:e.target.value}))}),j.date&&(0,a.jsx)("p",{className:"text-xs text-red-400 mt-1",children:j.date})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Amount"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"input mt-1",value:p.amount,onChange:e=>f(t=>({...t,amount:e.target.value})),onBlur:()=>{let e=(0,l.Ie)(p.amount);e>0&&f(t=>({...t,amount:(e/100).toFixed(2)}))}}),j.amount&&(0,a.jsx)("p",{className:"text-xs text-red-400 mt-1",children:j.amount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Category"}),(0,a.jsx)("select",{className:"select mt-1",value:p.category,onChange:e=>f(t=>({...t,category:e.target.value})),children:l.aA.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),j.category&&(0,a.jsx)("p",{className:"text-xs text-red-400 mt-1",children:j.category})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Description"}),(0,a.jsx)("input",{className:"input mt-1",placeholder:"What did you spend on?",value:p.description,onChange:e=>f(t=>({...t,description:e.target.value}))}),j.description&&(0,a.jsx)("p",{className:"text-xs text-red-400 mt-1",children:j.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"btn btn-primary disabled:opacity-50",disabled:v,type:"submit",children:o?"Save Changes":"Add Expense"}),p.amount&&(0,a.jsxs)("span",{className:"badge",children:["= ",(0,l.Yu)((0,l.Ie)(p.amount))]})]})]})}},33147:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(57437),n=s(2265),r=s(37440),l=s(86517),i=s(53262);function c(e){let{open:t,onClose:s,title:r,children:l}=e;return((0,n.useEffect)(()=>{function e(e){"Escape"===e.key&&s()}return t&&document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,s]),t)?(0,a.jsxs)("div",{className:"fixed inset-0 z-40 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60",onClick:s}),(0,a.jsxs)("div",{className:"relative z-50 card w-full max-w-lg",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:r}),(0,a.jsx)("button",{className:"btn btn-outline text-slate-300",onClick:s,children:"Close"})]}),l]})]}):null}var d=s(17973);function o(){let{filtered:e,remove:t}=(0,l.t)(),[s,o]=(0,n.useState)(null),{state:u}=(0,l.t)(),{notify:m}=(0,d.p)(),x=e.find(e=>e.id===s)||null;return(0,a.jsxs)("div",{id:"list",className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Expenses"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("button",{className:"btn btn-outline",onClick:()=>{try{let t=(0,r.MJ)(e),s=u.filters.startDate||u.filters.endDate||u.filters.category||u.filters.search?"-filtered":"-all";(0,r.LR)("expenses".concat(s,".csv"),t,"text/csv;charset=utf-8"),m("Exported CSV")}catch(e){console.error("CSV export failed",e),m("CSV export failed. Check console.")}},children:"Export CSV"})})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"w-[110px]",children:"Date"}),(0,a.jsx)("th",{children:"Description"}),(0,a.jsx)("th",{className:"w-[140px]",children:"Category"}),(0,a.jsx)("th",{className:"w-[110px] text-right",children:"Amount"}),(0,a.jsx)("th",{className:"w-[120px] text-right",children:"Actions"})]})}),(0,a.jsxs)("tbody",{children:[0===e.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"py-6 text-center text-slate-400",children:"No expenses match your filters."})}),e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"whitespace-nowrap",children:e.date}),(0,a.jsx)("td",{children:e.description}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"badge",children:e.category})}),(0,a.jsx)("td",{className:"text-right font-medium",children:(0,r.Yu)(e.amountCents)}),(0,a.jsx)("td",{className:"text-right",children:(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsx)("button",{className:"btn btn-outline",onClick:()=>o(e.id),children:"Edit"}),(0,a.jsx)("button",{className:"btn btn-outline text-red-300 hover:text-red-200 hover:bg-red-950/40 border-red-900",onClick:()=>t(e.id),children:"Delete"})]})})]},e.id))]})]})}),(0,a.jsx)(c,{open:!!x,onClose:()=>o(null),title:"Edit Expense",children:x&&(0,a.jsx)(i.Z,{initial:x,onDone:()=>o(null)})})]})}},86517:function(e,t,s){"use strict";s.d(t,{ExpenseProvider:function(){return c},t:function(){return d}});var a=s(57437),n=s(2265);let r="pros-expenses-v1",l=(0,n.createContext)(null);function i(e,t){switch(t.type){case"INIT":return{...e,loaded:!0,expenses:t.expenses};case"ADD":return{...e,expenses:[t.expense,...e.expenses]};case"EDIT":return{...e,expenses:e.expenses.map(e=>e.id===t.id?{...e,...t.patch,updatedAt:Date.now()}:e)};case"DELETE":return{...e,expenses:e.expenses.filter(e=>e.id!==t.id)};case"FILTER":return{...e,filters:{...e.filters,...t.filters}};default:return e}}function c(e){let{children:t}=e,[s,c]=(0,n.useReducer)(i,{expenses:[],filters:{category:"All"},loaded:!1});(0,n.useEffect)(()=>{c({type:"INIT",expenses:function(){try{let e=localStorage.getItem(r);if(!e)return[];let t=JSON.parse(e);if(!Array.isArray(t))return[];return t.map(e=>({...e,amountCents:Number(e.amountCents)||0,createdAt:Number(e.createdAt)||Date.now(),updatedAt:Number(e.updatedAt)||Date.now()}))}catch(e){return[]}}()})},[]),(0,n.useEffect)(()=>{s.loaded&&function(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(e){}}(s.expenses)},[s.expenses,s.loaded]);let d=(0,n.useMemo)(()=>(function(e,t){let s=e.slice();if(t.startDate&&(s=s.filter(e=>e.date>=t.startDate)),t.endDate&&(s=s.filter(e=>e.date<=t.endDate)),t.category&&"All"!==t.category&&(s=s.filter(e=>e.category===t.category)),t.search&&t.search.trim()){let e=t.search.toLowerCase();s=s.filter(t=>t.description.toLowerCase().includes(e))}return s.sort((e,t)=>e.date<t.date?1:e.date>t.date?-1:t.createdAt-e.createdAt),s})(s.expenses,s.filters),[s.expenses,s.filters]),o=e=>{let t="undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():String(Math.random()).slice(2),s=Date.now();c({type:"ADD",expense:{id:t,createdAt:s,updatedAt:s,...e}})},u=(e,t)=>c({type:"EDIT",id:e,patch:t}),m=e=>c({type:"DELETE",id:e}),x=e=>c({type:"FILTER",filters:e}),h=(0,n.useMemo)(()=>({state:s,filtered:d,add:o,edit:u,remove:m,setFilters:x}),[s,d]);return(0,a.jsx)(l.Provider,{value:h,children:t})}function d(){let e=(0,n.useContext)(l);if(!e)throw Error("useExpenses must be used within ExpenseProvider");return e}},17973:function(e,t,s){"use strict";s.d(t,{default:function(){return i},p:function(){return l}});var a=s(57437),n=s(2265);let r=(0,n.createContext)(null);function l(){let e=(0,n.useContext)(r);if(!e)throw Error("Toast used outside provider");return e}function i(e){let{children:t}=e,[s,l]=(0,n.useState)([]),i=(0,n.useRef)(0),c=(0,n.useCallback)(e=>{let t={id:String(i.current++),message:e};l(e=>[...e,t]),setTimeout(()=>l(e=>e.filter(e=>e.id!==t.id)),2500)},[]);return(0,a.jsxs)(r.Provider,{value:{notify:c},children:[t,(0,a.jsx)("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:s.map(e=>(0,a.jsx)("div",{className:"card bg-slate-900/90 border border-slate-700 shadow-soft",children:(0,a.jsx)("div",{className:"text-sm",children:e.message})},e.id))})]})}},15361:function(e,t,s){"use strict";s.d(t,{Ee:function(){return i},SK:function(){return c},d5:function(){return n},f$:function(){return r},ht:function(){return l}});var a=s(37440);function n(e){return e.reduce((e,t)=>e+t.amountCents,0)}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,s=t.getFullYear(),a=t.getMonth();return e.filter(e=>{let t=new Date(e.date+"T00:00:00");return t.getFullYear()===s&&t.getMonth()===a}).reduce((e,t)=>e+t.amountCents,0)}function l(e){let t=new Map;for(let s of e)t.set(s.category,(t.get(s.category)||0)+s.amountCents);return Array.from(t.entries()).map(e=>{let[t,s]=e;return{category:t,amountCents:s}})}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return l(e).sort((e,t)=>t.amountCents-e.amountCents).slice(0,t)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,n=new Map;for(let e=t-1;e>=0;e--){let t=new Date(s.getFullYear(),s.getMonth()-e,1);n.set((0,a._J)(t),0)}for(let t of e){let e=new Date(t.date+"T00:00:00"),s=(0,a._J)(e);n.has(s)&&n.set(s,(n.get(s)||0)+t.amountCents)}return Array.from(n.entries()).map(e=>{let[t,s]=e;return{month:t,amountCents:s}})}},37440:function(e,t,s){"use strict";s.d(t,{Ie:function(){return r},LR:function(){return i},MJ:function(){return l},Yu:function(){return n},_J:function(){return c},aA:function(){return a}});let a=["Food","Transportation","Entertainment","Shopping","Bills","Other"];function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:2}).format(e/100)}function r(e){let t=parseFloat(e.replace(/[^0-9.]/g,""));return Number.isNaN(t)?0:Math.round(100*t)}function l(e){return["Date,Amount,Category,Description",...e.map(e=>{var t;return[e.date,(e.amountCents/100).toFixed(2),e.category,(t=e.description,/[",\n]/.test(t)?'"'.concat(t.replace(/"/g,'""'),'"'):t)]}).map(e=>e.join(","))].join("\n")}function i(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv",a=new Blob([t],{type:s}),n=document.createElement("a");n.href=URL.createObjectURL(a),n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(n.href)}function c(e){return"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"))}}},function(e){e.O(0,[590,971,23,744],function(){return e(e.s=92732)}),_N_E=e.O()}]);